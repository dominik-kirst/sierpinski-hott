\documentclass[xcolor=dvipsnames,compress,aspectratio=169,handout]{beamer}
\usepackage{beamerthemeCS-Saar-Uni_sic}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage[OT1]{fontenc}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{amsfonts,amsmath}
\usepackage{cleveref}
\usepackage{scalerel}
\usepackage{multicol}
\usepackage{xspace}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{stmaryrd}
\usepackage{proof}
\usepackage{natbib}

\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{arrows.meta}
\def\checkmark{\tikz\fill[scale=0.4](0,.35) -- (.25,0) -- (1,.7) -- (.25,.15) -- cycle;}

\title[GCH Implies AC in HoTT]{The Generalised Continuum Hypothesis\\Implies the Axiom of Choice in HoTT}
\author[\underline{Dominik Kirst} and Felix Rech]{\underline{Dominik Kirst} and Felix Rech}
\date[HoTT/UF'21]{Workshop on Homotopy Type Theory / Univalent Foundations\\July 18, 2021}

\newcommand{\nologo}{\setbeamertemplate{logo}{}} % command to set the logo to nothing


\DeclareMathAlphabet{\mymathbb}{U}{bbold}{m}{n}
\DeclareMathOperator*{\dbigvee}{\scalerel*{\bigvee}{\sum}}

% BOXES
\usepackage[many]{tcolorbox}
\newtcolorbox{emptybox}[1][]{
	beamer,
	width=(0.7\textwidth),
	% enlarge left by=-3pt,
	titlerule=0mm,
	colframe=white,
	coltitle=black,
	bottom=6pt, 
	top=-12pt,
	left=6pt,  
	right=6pt,
	notitle, 
	adjusted title={},
	outer arc=.5mm,
	arc=.5mm,
	no shadow,
	fuzzy shadow={1mm}{-1mm}{-1.2mm}{.7mm}{black!20},
	interior titled code={}
}

\newtcolorbox{widerbox}[1][]{
	beamer,
	width=(0.82\textwidth),
	% enlarge left by=-3pt,
	titlerule=0mm,
	colframe=white,
	coltitle=black,
	bottom=6pt, 
	top=-12pt,
	left=6pt,  
	right=6pt,
	notitle, 
	adjusted title={},
	outer arc=.5mm,
	arc=.5mm,
	no shadow,
	fuzzy shadow={1mm}{-1mm}{-1.2mm}{.7mm}{black!20},
	interior titled code={}
}

\newtcolorbox{widebox}[1][]{
	beamer,
	width=(\textwidth),
	% enlarge left by=-3pt,
	titlerule=0mm,
	colframe=white,
	coltitle=black,
	bottom=6pt, 
	top=-12pt,
	left=6pt,  
	right=6pt,
	notitle, 
	adjusted title={},
	outer arc=.5mm,
	arc=.5mm,
	no shadow,
	fuzzy shadow={1mm}{-1mm}{-1.2mm}{.7mm}{black!20},
	interior titled code={}
}


% TIMELINE
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{stackengine}
\usetikzlibrary{trees, shapes, calc, positioning, shadows}

\definecolor{darkcerulean}{rgb}{0.063661, 0.257392, 0.477463}
\definecolor{scooter}{rgb}{0.161162, 0.775760, 0.885416}


% #1 – box name
% #2 – left color
% #3 – right color
% #4 – Title (may contain #1)
\newcommand{\newlargebox}[4]{
	\newtcolorbox{#1}[1][]{
		beamer,
		width=\textwidth+7pt,
		enlarge left by=-3pt,
		titlerule=3mm,
		colframe=white,
		coltitle={#2},
		bottom=2pt, 
		top=-4pt,
		left=6pt,  
		toptitle=2pt,
		bottomtitle=-2pt,
		fonttitle=\bfseries\large,
		adjusted title={#4},
		outer arc=.5mm,
		arc=.5mm,
		no shadow,
		fuzzy shadow={1mm}{-1mm}{-1.2mm}{.7mm}{black!20},
		interior titled code={
			\path [left color = {#2}, right color = {#3}]
			(title.south west) + (8pt, 0) rectangle ++(\textwidth-1pt, 0.02);
		}
	}
}


\newlargebox{defaultbox}{darkcerulean}{scooter}{#1} 

\usepackage{fancyvrb}
\usepackage{xcolor}


%%% fonts in math environment
\newcommand{\MBB}[1]{\ensuremath{\mathbb{#1}}\xspace}  % blackboard
\newcommand{\MBF}[1]{\ensuremath{\mathbf{#1}}\xspace}  % bold
\newcommand{\MCL}[1]{\ensuremath{\mathcal{#1}}\xspace} % calligraphy
\newcommand{\MTT}[1]{\ensuremath{\mathtt{#1}}\xspace}  % type writer
\newcommand{\MRM}[1]{\ensuremath{\mathrm{#1}}\xspace}  % plain
\newcommand{\MIT}[1]{\ensuremath{\mathit{#1}}\xspace}  % italic
\newcommand{\MSF}[1]{\ensuremath{\mathsf{#1}}\xspace}  % sans


%%% common symbols
\newcommand{\Nat}{\MBB{N}}   % The natural numbers
\newcommand{\Int}{\MBB{Z}}   % The whole numbers
\newcommand{\Rtn}{\MBB{Q}}   % The rational numbers
\newcommand{\Real}{\MBB{R}}  % The real numbers
\newcommand{\Bool}{\MBB{B}}  % The booleans
\newcommand{\Unit}{\mymathbb{1}}  % Unit type



%%% marcros
\newcommand{\Pow}{\MCL P}
\newcommand{\Prop}{\MBB P}
\newcommand{\Type}{\MBB T}
\newcommand{\btrue}{\MSF{tt}}
\newcommand{\bfalse}{\MSF{ff}}
\newcommand{\ordinals}{\MCL O}
\newcommand{\hartogsNumber}{\aleph}
\newcommand{\succs}[1]{\sigma(#1)}
\newcommand{\rec}{\MSF{rec}}
\newcommand{\Set}{\MCL S}
\newcommand{\WF}{\MCL W}
\newcommand{\GCHS}{\textnormal{GCH}_\Set}
\newcommand{\WOS}{\textnormal{WO}_\Set}
\newcommand{\ACS}{\textnormal{AC}_\Set}
\newcommand{\GCHT}{\textnormal{GCH}_\Type}
\newcommand{\WOT}{\textnormal{WO}_\Type}
\newcommand{\ACT}{\textnormal{AC}_\Type}
\newcommand{\GCHR}{\textnormal{GCH}_\Prop}
\newcommand{\ACR}{\textnormal{AC}_\Prop}


\begin{document}

%\beamerdefaultoverlayspecification{<+->}
\renewcommand{\emph}[1]{\textcolor{sb@mcyan}{#1}}
\definecolor{red}{RGB}{204,0,0}
\definecolor{yellow}{RGB}{228,242,31}
\definecolor{green}{RGB}{0,204,0}

\newcommand\refs[1]{%
	\begin{textblock*}{8cm}(0.3cm,9.2cm)%
		\scriptsize {\color{gray}#1}
	\end{textblock*}
}


%\begin{frame}
%  \tableofcontents
%\end{frame}

\nologo
\begin{frame}
	\maketitle
\end{frame}

\begin{frame}{The Generalised Continuum Hypothesis Implies the Axiom of Choice in ZF}
	\begin{centering}
		\begin{widerbox}
			\center
			There are no cardinalities between an infinite set and its power set (GCH)\\
			\vspace{0.1cm}
			$\Downarrow$\\
			\vspace{0.1cm}
			Every set has a choice function / can be well-ordered (AC/WO)
		\end{widerbox}
	\end{centering}

	\vspace{0.3cm}
	\begin{itemize}
		\item
		Result in ZF set theory announced by~\cite{lindenbaum_communication_1926}
		\vspace{0.1cm}
		\item
		First published proof by~\cite{sierpinski1947}
		\vspace{0.1cm}
		\item
		Refinement using GCH more locally by~\cite{specker_verallgemeinerte_1990}
		\vspace{0.3cm}
		\item
		Mechanisation in Metamath by~\cite{carneiro_gch_2015}
		\vspace{0.1cm}
		\item
		``GCH implies AC in Coq'' by~\cite{kirst2021generalised}
		\begin{itemize}
			\item
			Two mechanised variants: higher-order ZF and Coq's type theory
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}{Set Theory in Coq's Type Theory}
	%Some abstract set-theoretic results apply to dependent type theories,\\ e.g. the equivalence of WO and AC ( \cite{ilik_zermelo,smolka_transfinite_2015}).
	Using impredicative universe $\Prop$ and propositional existence $(\exists x.\,P\,x):\Prop$ we have:
	
	\vspace{0.3cm}
	\begin{center}
	\begin{tabular}{c|c|c}
				&ZF set theory&Coq's Type Theory\\\hline
				\vphantom{\vdots}Power sets&$\Pow(A)$&$X\to\Prop$\\[0.2cm]
				Numbers&$\omega$&$\Nat$\\[0.2cm]
				%Relations&$\Pow(A\times B)$&$X\to Y\to\Prop$\\[0.2cm]
				%Functions&$\{f\subseteq A\times B\mid \dots \}$&$X\to Y$\\[0.2cm]
				Cardinality&$\exists f\subseteq A\times B\dots$&$\exists f:X\to Y\dots$\\[0.2cm]
				Orderings&$\exists R\subseteq A\times A\dots$&$\exists R:X\to X\to\Prop\dots$
	\end{tabular}
	\end{center}
	
	\vspace{0.3cm}
	Axioms necessary to make Coq's type theory behave like set theory:
	\begin{itemize}
	\item Functional extensionality, to tame function space
	\item Propositonal extensionality, to tame predicate space
	\item Unique choice, to identify functions with total functional relations
	\end{itemize}
\end{frame}

\newcommand{\trunc}[1]{||#1||}
\newcommand{\hprop}{\mathsf{hProp}}
\newcommand{\hset}{\mathsf{hSet}}
\newcommand{\Ord}{\mathsf{Ord}}

\begin{frame}{Set Theory in Homotopy Type Theory}
	Using propositional resizing to represent propositions in $\Omega:\mathcal{U}_0$ we have:

	\vspace{0.1cm}
	\begin{center}
	\begin{tabular}{c|c|c}
				&ZF set theory&Homotopy Type Theory\\\hline
				\vphantom{\vdots}Power sets&$\Pow(A)$&$X\to\Omega$\\[0.2cm]
				Numbers&$\omega$&$\Nat$\\[0.2cm]
				%Relations&$\Pow(A\times B)$&$X\to Y\to\Prop$\\[0.2cm]
				%Functions&$\{f\subseteq A\times B\mid \dots \}$&$X\to Y$\\[0.2cm]
				Cardinality&$\exists f\subseteq A\times B\dots$&$\trunc{\Sigma f:X\to Y\dots}$\\[0.2cm]
				Orderings&$\exists R\subseteq A\times A\dots$&$\trunc{\Sigma R:X\to X\to\Omega\dots}$
	\end{tabular}
	\end{center}
	
	\vspace{0.1cm}
	Naturally suited to represent set theory:
	\begin{itemize}
	\item Functional extensionality, implied by univalence
	\item Propositonal extensionality, implied by univalence
	\item Unique choice, by the elimination principle of propositional truncation
	\end{itemize}
	
	\vspace{0.3cm}
	Deviation from ZF: equipotent sets are equal (doesn't affect result, simplifies mechanisation)
\end{frame}

\begin{frame}{Formulating GCH in HoTT}
	With $X\le Y$ as propositional cardinality comparison $\trunc{\Sigma f:X\to Y.\,\mathsf{injective}\,f}$:
	
	\vspace{0.5cm}
	\begin{centering}
		\begin{widerbox}
			\center
			There are no cardinalities between an infinite set and its power set.
			$$\forall X Y:\hset.~\Nat \le X\le Y\le \Pow(X)~\,\to~\, Y\le X ~+~ \Pow(X)\le Y$$
			%			$$\only<2>{
			%			\forall X Y.\, |\Nat|\le |X|\to \textcolor{lightgray}{|X|  \le |Y|  \le |\Pow(X)|\to |Y|\le|X| \lor |\Pow(X)|\le |Y|}}
			%			\only<3>{
			%			\textcolor{lightgray}{\forall X Y.\, |\Nat|\le |X|\to~} |X|  \le |Y|  \le |\Pow(X)|\to \textcolor{lightgray}{|Y|\le|X| \lor |\Pow(X)|\le |Y|}}
			%			\only<4>{
			%			\textcolor{lightgray}{\forall X Y.\, |\Nat|\le |X|\to |X|  \le |Y|  \le |\Pow(X)|\to ~}|Y|\le|X| \lor |\Pow(X)|\le |Y|}
			%			\only<5->{
			%			\forall X Y.\, |\Nat|\le |X|\to |X|  \le |Y|  \le |\Pow(X)|\to |Y|\le|X| \lor |\Pow(X)|\le |Y|}$$
		\end{widerbox}
	\end{centering}
	
	\vspace{0.5cm}
	\begin{itemize}
		\item
		Proposition since concluding disjunction is exclusive (Cantor's theorem)
		\vspace{0.3cm}
		\item
		Formulated positively since cardinalities aren't comparable without AC
		\vspace{0.3cm}
		\item
		Conclusion just the missing comparison, not yet the equivalence
	\end{itemize}
\end{frame}

\begin{frame}{GCH implies LEM}
	Already a weaker formulation of CH$~=~$GCH($\Nat$) implies the excluded middle (LEM):
	\begin{fact}[cf. \cite{bridges2016continuum}]
		$(\forall X:\hset.\,\Nat \le X\le \Pow(\Nat)\to X\not\le \Nat\to \Pow(\Nat)\le X)~\to~\forall P:\hprop.\,P+\neg P$
	\end{fact}
	\begin{proof}
		\begin{enumerate}
			\item
			Given $P:\hprop$, the set $X:=\Sigma\, p:\Pow(\Nat).\,\mathsf{singleton}\,p\lor (P+\neg P)$ satisfies the premises.
			\item
			Hence we obtain an injection $i:\Pow(\Nat)\to X$.
			\item
			By a variant of Cantor's theorem there is $p:\Pow(\Nat)$ such that $\pi_1(i\,p)$ is not a singleton.
			\item
			Thus $P+\neg P$ must be the case.
			\qedhere
		\end{enumerate}
	\end{proof}
	So by classical reasoning, i.e.\ the Cantor-Bernstein theorem:
	\begin{corollary}
		GCH is equivalent to $\forall X Y:\hset.\,\Nat \le X\le Y\le \Pow(X)~\to~ Y = X \,+\, \Pow(X) = Y$.
	\end{corollary}
\end{frame}

\begin{frame}
	\Huge
	\centering
	Proof Overview
\end{frame}

\begin{frame}{Outline}
	\begin{enumerate}[<+->]
			\item
			Instead of AC, show the equivalent WO
			\vspace{0.4cm}
			\item
			To well-order $X$ it suffices to find ordinal $\alpha$ with $X\le \alpha$
			\vspace{0.4cm}
			\item
			Enough to only well-order infinite $X$ since always $X\le\Nat + X$
			\vspace{0.4cm}
			\item
			Central construction: Hartogs number $\hartogsNumber(X)$
			\begin{itemize}
				\item
				\vspace{0.2cm}
				Large ordinal: $\hartogsNumber(X)\not\le X$
				\vspace{0.2cm}
				\item
				Controlled height: $\hartogsNumber(X)\le\Pow^3(X)$
			\end{itemize}
			\vspace{0.4cm}
			\item
			Develop cardinal arithmetic in the absence of AC
			\vspace{0.4cm}
			\item
			Use GCH to iteratively squeeze in $\hartogsNumber(X)$ and obtain $X\le \hartogsNumber(X)$
	%		\begin{itemize}
	%			\vspace{0.3cm}
	%			\item
	%			Suitable instance yields $|X|\le|H(X)|$ or $|H(X)|\le |\Pow^{k-1}(X)|$
	%			\vspace{0.3cm}
	%			\item
	%			Iterate in the latter case until $|H(X)|\le |\Pow^{0}(X)|=|X|$
	%		\end{itemize}
		\end{enumerate}
\end{frame}

\begin{frame}{Constructive Ordinal Numbers (Chapter 10.3 of the HoTT book)}
	\begin{definition}
		An ordinal is a set equipped with a well-founded, extensional, transitive, mere relation.
	\end{definition}

	\vspace{0.5cm}
	Properties needed for main result:
	\begin{itemize}
		\vspace{0.2cm}
		\item
		Isomorphic ordinals are equal
		\vspace{0.2cm}
		\item
		Type $\Ord$ of ordinals with natural ordering is an ordinal
		\vspace{0.2cm}
		\item
		Every ordinal is isomorphic to its set of initial segments
		\vspace{0.2cm}
		\item
		Ordinals satisfy trichotomy and have least elements (requiring LEM)
	\end{itemize}

	\vspace{0.5cm}
	Also successor and limit ordinals mechanised but irrelevant for main result.
\end{frame}

\begin{frame}{Hartogs Number of a set $X$}
	\begin{definition}
		We define $\aleph'(X):\Ord$ as the type of ordinals $\alpha$ with $\alpha \le X$, ordered by the natural ordering.
	\end{definition}

	\vspace{0.3cm}
	The ordinal $\aleph'(X)$ lives in a higher universe level than $X$, therefore need to resize:
	
	\begin{theorem}
		Using LEM, we obtain $\aleph(X)$ by resizing $\aleph'(X)$ along the canonical injection $\aleph'(X)\le\Pow^3(X)$.
		Then $\aleph(X)$ is in the same universe as $X$ and satisfies $\aleph(X)\le\Pow^3(X)$ as well as $\aleph(X)\not\le X$.
	\end{theorem}
	\begin{proof}
		\begin{enumerate}
			\item
			Injection $i: \aleph'(X)\to\Pow^3(X)$ maps $\alpha\le X$ to its induced order on $X$ (using trichotomy).
			\item
			Obtain $\aleph(X)$ as range of $i$ with ordering of $\aleph'(X)$, then $\aleph(X)\le\Pow^3(X)$ by construction.
			\item
			$\aleph(A)\not\le A$ since otherwise $\aleph(A)$ would be an initial segment of the isomorphic $\aleph'(A)$.
			\qedhere
		\end{enumerate}
	\end{proof}
\end{frame}

\begin{frame}{Cardinal Arithmetic without AC}

With AC, infinite sets $X$ satisfy $X\simeq X+X$. Without AC we get:

\begin{lemma}
	Using LEM, every infinite set $X$ satisfies $X\simeq\Unit+X$ and $\Pow(X)\simeq\Pow(X)+\Pow(X)$.
\end{lemma}
\vspace{-0.1cm}
\begin{proof}[Sketch]
	By equational reasoning, e.g. the former implies the latter as follows:
	$\Pow(X)\overset{\textnormal{LEM}}\simeq\Pow(\Unit+X)\pause\simeq\Pow(\Unit)\times \Pow (X)\pause\overset{\textnormal{LEM}}\simeq\Bool\times \Pow(X)\pause\simeq \Pow(X)+\Pow(X)$
\end{proof}

\vspace{0.3cm}
Once more using Cantor's theorem, the gap between large $X$ and $\Pow(X)$ is large:
\begin{lemma}
	For sets $X$ and $Y$ with $X+X\le X$ and $\Pow (X)\le X+Y$ we obtain $\Pow (X)\le Y$.
\end{lemma}
\vspace{-0.1cm}
\begin{proof}[Sketch]
	Obtain $i:\Pow (X)\times\Pow (X)\to X+Y$, use $\lambda p.\, i(p,c):\Pow (X)\to Y$, $c$ the diagonal set of $i^{-1}$.
\end{proof}

\end{frame}

\begin{frame}{Iterate GCH to conclude $X\le \aleph(X)$}

	
	\begin{theorem}
		Assume GCH and a function $F:\hset_i\to\hset_i$ such that there is $k:\Nat$ with $F(X)\le \Pow^k(X)$ and $F(X)\not\le X$ for all $X$.
		Then for every set $X$ we obtain $X\le F\,(\Pow(\Nat + X))$.
	\end{theorem}
	\vspace{-0.1cm}
	\begin{proof}
		Given $X$, we show that already $Y:=\Pow(\Nat + X)$ embeds into $F(Y)$ by induction on k:
		\begin{itemize}
			\vspace{0.2cm}
			\item
			If $k=0$ the assumptions $F(X)\le \Pow^k(X)$ and $F(X)\not\le X$ are contradictory.
			\vspace{0.2cm}
			\item
			For $k+1$ apply GCH to the situation $\Pow^{k}(Y)~\le~ \Pow^{k}(Y)+F(Y)~\le~ \Pow^{k+1}(Y)$:
			\begin{itemize}
			\vspace{0.2cm}
			\item
			If $\Pow^{k}(Y)+F(Y)\le \Pow^{k}(Y)$ then already $F(Y)\le \Pow^{k}(Y)$, conclude with IH.
			\vspace{0.2cm}
			\item
			If $\Pow^{k+1}(Y)\le \Pow^{k}(Y)+F(Y)$ then already $\Pow^{k+1}(Y)\le F(Y)$, conclude $Y\le F(Y)$.
			\qedhere
			\end{itemize}
		\end{itemize}
	\end{proof}
	\vspace{-0.1cm}
	\begin{corollary}
		GCH implies AC.
	\end{corollary}
\end{frame}

\begin{frame}
	\Huge
	\centering
	Observations
\end{frame}

\begin{frame}{Mechanisation Details}
	first project in HoTT, just a case study
	\begin{itemize}
		\item
		using HoTT library (easy to use)
		\item
		contributed the code (xxx new lines)
		\item
		power types actually $X\to\hprop$ to avoid resizing
		\item
		getting HN right was hard due to universes
	\end{itemize}
\end{frame}

\begin{frame}{Comparison to Previous Coq Mechanisation}
	worthwile data point
	\begin{itemize}
		\item
		could reuse code for cardinal arithmetic and main theorem
		\item
		hartogs number using ordinals closer to set theory
		\item
		slightly shorter, setoid rewriting avoided
		\item
		more uniform assumptions
		\item
		cost was ad-hoc resizing
	\end{itemize}
\end{frame}

\begin{frame}{Open Questions}
	\begin{itemize}
		\item
		could prop be used to avoid resizing by hand (Coq wip)
		\item
		are there meaningful formulations of GCH for higher types
		\item
		are there constructive versions of GCH, implying constructive versions of WO
	\end{itemize}
\end{frame}



%\begin{frame}[allowframebreaks]{Related Work}
\begin{frame}{Bibliography}
%\scriptsize
\small
\bibliographystyle{apalike}
\bibliography{abstract}
\end{frame}


\end{document}

